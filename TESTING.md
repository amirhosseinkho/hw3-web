# راهنمای تست برنامه نقاشی

## مراحل تست کامل سیستم

### 1. راه‌اندازی سرور
```bash
cd server
npm start
```
سرور باید روی پورت 5000 اجرا شود و پیام زیر را نمایش دهد:
```
Server is running on port 5000
Connected to SQLite database
```

### 2. راه‌اندازی فرانت‌اند
```bash
npm start
```
برنامه React باید روی پورت 3000 اجرا شود.

### 3. تست API با فایل HTML
فایل `test-api.html` را در مرورگر باز کنید تا API endpoints را تست کنید.

### 4. تست کامل برنامه

#### مرحله 1: ورود به سیستم
1. صفحه ورود را باز کنید
2. از یکی از حساب‌های آزمایشی استفاده کنید:
   - نام کاربری: `user1`
   - رمز عبور: `password123`
3. روی دکمه "ورود" کلیک کنید

#### مرحله 2: تست رسم شکل‌ها
1. از نوار کناری، ابزار دایره را انتخاب کنید
2. رنگ قرمز را انتخاب کنید
3. اندازه را روی 60 تنظیم کنید
4. روی بوم کلیک کنید تا دایره رسم شود
5. همین کار را با شکل‌های دیگر تکرار کنید

#### مرحله 3: تست جابجایی شکل‌ها
1. روی یک شکل کلیک کنید و نگه دارید
2. شکل را به موقعیت جدید بکشید
3. رها کنید تا در موقعیت جدید قرار گیرد

#### مرحله 4: تست حذف شکل‌ها
1. روی هر شکل دوبار کلیک کنید
2. شکل باید حذف شود

#### مرحله 5: تست Undo/Redo
1. چند شکل رسم کنید
2. از دکمه‌های بازگشت و تکرار استفاده کنید
3. تغییرات باید به درستی اعمال شود

#### مرحله 6: تست ذخیره در سرور
1. چند شکل رسم کنید
2. عنوان نقاشی را تغییر دهید
3. روی دکمه "ذخیره در سرور" کلیک کنید
4. پیام موفقیت باید نمایش داده شود

#### مرحله 7: تست بارگذاری از سرور
1. روی دکمه "بارگذاری از سرور" کلیک کنید
2. نقاشی ذخیره شده باید بارگذاری شود
3. تمام شکل‌ها باید در جای خود باشند

#### مرحله 8: تست خروجی گرفتن
1. روی دکمه "خروجی گرفتن" کلیک کنید
2. فایل JSON باید دانلود شود
3. فایل را باز کنید و محتویات را بررسی کنید

#### مرحله 9: تست وارد کردن
1. فایل JSON دانلود شده را انتخاب کنید
2. روی دکمه "وارد کردن" کلیک کنید
3. نقاشی باید بارگذاری شود

#### مرحله 10: تست خروج
1. روی نام کاربر در هدر کلیک کنید
2. روی دکمه "خروج" کلیک کنید
3. باید به صفحه ورود برگردید

### 5. تست چند کاربری

#### تست کاربر اول
1. با `user1` وارد شوید
2. یک نقاشی رسم کنید
3. آن را ذخیره کنید
4. خارج شوید

#### تست کاربر دوم
1. با `user2` وارد شوید
2. نقاشی متفاوتی رسم کنید
3. آن را ذخیره کنید
4. خارج شوید

#### تست بازیابی
1. با `user1` دوباره وارد شوید
2. نقاشی خود را بارگذاری کنید
3. نقاشی `user1` باید نمایش داده شود
4. با `user2` وارد شوید
5. نقاشی `user2` باید نمایش داده شود

### 6. تست خطاها

#### تست ورود ناموفق
1. نام کاربری اشتباه وارد کنید
2. پیام خطا باید نمایش داده شود

#### تست ذخیره بدون ورود
1. بدون ورود، روی "ذخیره در سرور" کلیک کنید
2. پیام خطا باید نمایش داده شود

#### تست بارگذاری بدون ورود
1. بدون ورود، روی "بارگذاری از سرور" کلیک کنید
2. پیام خطا باید نمایش داده شود

### 7. تست عملکرد

#### تست عملکرد با شکل‌های زیاد
1. 50 شکل مختلف رسم کنید
2. عملکرد باید روان باشد
3. Undo/Redo باید کار کند

#### تست عملکرد با اندازه‌های مختلف
1. شکل‌های با اندازه‌های مختلف رسم کنید
2. همه باید به درستی نمایش داده شوند

#### تست عملکرد با رنگ‌های مختلف
1. از تمام رنگ‌های موجود استفاده کنید
2. همه باید به درستی نمایش داده شوند

### 8. تست ریسپانسیو

#### تست در مرورگرهای مختلف
1. Chrome
2. Firefox
3. Edge
4. Safari (در صورت امکان)

#### تست در اندازه‌های مختلف صفحه
1. دسکتاپ (1920x1080)
2. لپ‌تاپ (1366x768)
3. تبلت (768x1024)
4. موبایل (375x667)

### 9. تست امنیت

#### تست توکن منقضی شده
1. توکن را از localStorage حذف کنید
2. صفحه را refresh کنید
3. باید به صفحه ورود برگردید

#### تست درخواست‌های نامعتبر
1. توکن اشتباه ارسال کنید
2. پیام خطای مناسب باید دریافت کنید

### 10. تست پایگاه داده

#### بررسی فایل پایگاه داده
1. فایل `server/database.sqlite` را بررسی کنید
2. جداول `users` و `drawings` باید وجود داشته باشند
3. کاربران پیش‌فرض باید در جدول `users` باشند

#### تست پایداری داده‌ها
1. سرور را restart کنید
2. داده‌ها باید حفظ شوند
3. کاربران باید بتوانند نقاشی‌های خود را بارگذاری کنند

## نکات مهم تست

1. **سرور باید همیشه اجرا باشد** قبل از تست فرانت‌اند
2. **پورت 5000** باید آزاد باشد
3. **CORS** باید فعال باشد
4. **localStorage** باید پاک شود در صورت بروز مشکل
5. **فایل‌های JSON** باید با encoding UTF-8 ذخیره شوند

## عیب‌یابی مشکلات رایج

### مشکل اتصال به سرور
- بررسی کنید سرور روی پورت 5000 اجرا می‌شود
- بررسی کنید firewall پورت را مسدود نکرده
- بررسی کنید CORS فعال است

### مشکل پایگاه داده
- فایل `database.sqlite` را حذف کنید
- سرور را restart کنید
- جداول مجدداً ایجاد می‌شوند

### مشکل احراز هویت
- localStorage را پاک کنید
- صفحه را refresh کنید
- دوباره وارد شوید

### مشکل عملکرد
- مرورگر را refresh کنید
- کش مرورگر را پاک کنید
- از مرورگر دیگری استفاده کنید 